{"version":3,"sources":["webpack:///webpack/bootstrap 20c707ae2c4ee0fa3eba","webpack:///./src/client/request.ts","webpack:///./src/client/worker.ts"],"names":[],"mappings":"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","file":"worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 20c707ae2c4ee0fa3eba","import { Color } from \"./colors\";\r\n\r\nexport const saveColor = async (color: Color) => {\r\n    return fetch('/api/colors', {\r\n        method: 'PUT',\r\n        body: JSON.stringify(color),\r\n        headers: new Headers({\r\n            \"Content-Type\": \"application/json\",\r\n        })\r\n    });\r\n};\r\n\r\n\r\nexport const saveSubscription = (subData: any) => {\r\n\r\n};\r\n\r\nexport const loadColors = async (): Promise<Color[]> => {\r\n    const response = await fetch('/api/colors', {\r\n        method: 'GET'\r\n    })\r\n    if (!response.ok) {\r\n        throw new Error('Unable to load saved colors');\r\n    }\r\n    return response.json() as Promise<Color[]>;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/client/request.ts","console.log('WORKER dddd!');\r\nimport { saveColor } from \"./request\";\r\n\r\nconst db = new ColorsDb();\r\n\r\nconst CACHE_NAME = 'colors-cache-v1';\r\n\r\nself.addEventListener('install', (event: any) => {\r\n\r\n    event.waitUntil((async ()=> {\r\n              const cache = await caches.open(CACHE_NAME);\r\n              await cache.addAll([\r\n                './assets/opensans.woff2',\r\n                './app.js',\r\n                './styles.js',\r\n                './'\r\n              ]);\r\n    })());\r\n});\r\n\r\nself.addEventListener('fetch', (event: any) => {\r\n\r\n  event.respondWith((async() =>{\r\n    const request: Request = event.request;\r\n    const myCache = await caches.open(CACHE_NAME);\r\n    const response = await myCache.match(request);\r\n    if (!response){\r\n      return fetch(request)\r\n    }\r\n    return response\r\n\r\n  })());\r\n});\r\n\r\n\r\nself.addEventListener('sync', (event: any) => {\r\n\r\n  event.respondWith(( async() => {\r\n    console.log(event.tag);\r\n\r\n    const allUnsynced = await db.getUnsyncedColors();\r\n    return Promise.all(allUnsynced.map( async(unsynced) => {\r\n      try {\r\n        await saveColor(unsynced.color);\r\n        await db.markSynced(unsynced);\r\n      } catch(e) {\r\n        console.log(e);\r\n      }\r\n\r\n    }))\r\n\r\n  })());\r\n\r\n})\r\n\r\n\r\n    // const cache = await caches.open(CACHE_NAME);\r\n\r\n    //\r\n    // bigPromise = caches.open(CACHE_NAME).then(() =>{\r\n    //   return promise\r\n    // })\r\n\r\n//\r\n// self.addEventListener('install', (event: any) => {\r\n//\r\n//     event.waitUntil();\r\n// });\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/worker.ts"],"sourceRoot":""}